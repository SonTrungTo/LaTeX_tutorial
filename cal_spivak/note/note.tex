\documentclass[a4paper,11pt,twoside]{book}
\usepackage[affil-it]{authblk}
\usepackage{amsmath,amssymb,amsthm,fancyhdr,enumitem,%
hyperref,microtype,varwidth}
\usepackage[retainorgcmds]{IEEEtrantools}
\newcommand{\note}[1]{\emph{#1}}
\theoremstyle{plain} \newtheorem{id}{Lemma}
                     \newtheorem{thm}{Theorem}[chapter]
\theoremstyle{remark} \newtheorem*{ab}{Remark}
\newcommand{\idautorefname}{Lemma}
\newcommand{\abautorefname}{Remark}
\newcommand{\thmautorefname}{Theorem}
\newenvironment{solution}%
{\renewcommand{\qedsymbol}{$\blacksquare$}%
\begin{proof}[Solution]}%
{\end{proof}}
\pagestyle{fancy}

\begin{document}

\title{A Note of Calculus-Michael Spivak}
\author{Son To
  \thanks{Contact me at: \texttt{son.trung.to@gmail.com}}}
\date{23rd June, 2017}
\affil{Ravintola Kiltakellari}

\maketitle
\makeatletter
\def\cleardoublepage{\clearpage\if@twoside
\ifodd\c@page\else
  \hbox{}
  \vspace*{\fill}
  \begin{center}
    This page is intentionally left blank.
  \end{center}
  \vspace*{\fill}
  \thispagestyle{empty}
  \newpage
  \if@twocolumn\hbox{}\newpage\fi\fi\fi
}
\newcommand{\mylabel}[2]{#2\def\@currentlabel{#2}\label{#1}}
\makeatother

\frontmatter
    \chapter*{Preface}
      This is the note for the book Calculus
      writtten by Michael Spivak,
      citing what I think the most interesting
      and important subjects
      mentioned in the book.
    \addcontentsline{toc}{chapter}{Preface}
    \tableofcontents
    \thispagestyle{empty}
\mainmatter
  \part{Prologue}
    \chapter{Basic properties of number}
    \begin{itemize}
      \item[\mylabel{itm:P1}{(P1)}]
      If $a$, $b$, and $c$ are any numbers, then
      \begin{equation*}
        a+(b+c)=(a+b)+c
      \end{equation*}
    \end{itemize}
    See \note{problem 24} for the generalization of
    $a_1+a_2+a_3+\dots+a_n$ for (P1).

    The number 0 has important properties.
    \begin{itemize}
      \item[\mylabel{itm:P2}{(P2)}]
      If $a$ is any number, then
      \begin{equation*}
        a+0=0+a=a
      \end{equation*}
      \item[\mylabel{itm:P3}{(P3)}]
      For every number $a$, there is
      also a number $-a$ such that
      \begin{equation*}
        a+(-a)=(-a)+a=0
      \end{equation*}
    \end{itemize}
    We now prove \autoref{lemm:1}.
    \begin{id}\label{lemm:1}
      If $a+x=a$, then $x=0$
    \end{id}
    \begin{proof}
      \begin{IEEEeqnarray*}{x+rClr+x*}
        \text{If} & a+x & = & a \\
        \text{then} & (-a)+(a+x) & = & (-a)+a=0 & (by~(P3))\\
        \text{hence} & ((-a)+a)+x & = & 0 & (by~(P1))\\
        \text{hence} & 0+x & = & 0 & (by~(P3)~again)\\
        \text{therefore,} & x & = & 0 & (by~(P2)) \\
        &&&&& \qedhere
      \end{IEEEeqnarray*}
    \end{proof}
  Also, remember that the order of addition does not
  matter.
  \begin{itemize}
    \item[\mylabel{itm:P4}{(P4)}]
    If $a$ and $b$ are any numbers, then
    \begin{equation*}
      a+b=b+a
    \end{equation*}
  \end{itemize}
  However, with only (P1)-(P4), we are powerless to
  figure out what conditions needed to have
  $a-b=b-a$. Therefore, we need to set new properties, and,
  oddly, they involve multiplication.
  \begin{itemize}[label=\textnormal{(\arabic*)}]
    \item[\mylabel{itm:P5}{(P5)}]
    If $a$, $b$ and $c$ are any numbers, then
    \begin{equation*}
      a\cdot(b\cdot c)=(a\cdot b)\cdot c
    \end{equation*}
    \item[\mylabel{itm:P6}{(P6)}]
    If $a$ is any number, then
    \begin{equation*}
      a\cdot 1=1\cdot a=a
    \end{equation*}
    Moreover, $1\neq0$ (This cannot be proved by other
    properties listed!)
    \item[\mylabel{itm:P7}{(P7)}]
    For every number $a\neq0$, there is a number
    $a^{-1}$ such that
    \begin{equation*}
      a\cdot a^{-1}=a^{-1}\cdot a=1 (\Leftarrow 0\cdot
      b=0~\forall b)
    \end{equation*}
    \note{This is why $1/0$ is meaningless!}
    \item[\mylabel{itm:P8}{(P8)}]
    If $a$ and $b$ are any numbers, then
    \begin{equation*}
      a\cdot b=b\cdot a
    \end{equation*}
  \end{itemize}
  From \ref{itm:P5}, \ref{itm:P6} and \ref{itm:P7},
  we have two lemmas:
    \begin{id} \label{lemm:2}
      If $a\cdot b=a\cdot c$ then $a=0~\lor~b=c$
    \end{id}
    \begin{proof}
      If $a=0$ then the lemma is trivial. Suppose now
      $a\neq0$,
      \begin{IEEEeqnarray*}{*x+rCl+x*}
        \text{Multiply $a^{-1}$ to both sides,} & (a^{-1})
        \cdot (a\cdot b) & = & (a^{-1})\cdot (a\cdot c)\\
        \text{By \ref{itm:P5},} &
        (a^{-1}\cdot a)\cdot b & = &
        (a^{-1}\cdot a)\cdot c\\
        \text{By \ref{itm:P7},} &
        1\cdot b & = &
        1\cdot c\\
        \text{By \ref{itm:P6},} &
        b & = &
        c\\
        &&&& \qedhere
      \end{IEEEeqnarray*}
    \end{proof}
  \begin{id} \label{lemm:3}
    If $a\cdot b=0$ then $a=0~\lor~b=0$
  \end{id}
  \begin{proof}
    If $a=0$, there is nothing to prove. Suppose now
    $a\neq0$, follow the proof of \autoref{lemm:2} by
    consecutively applying \ref{itm:P5}, \ref{itm:P7} and
    \ref{itm:P6} in that order to finish the proof.
  \end{proof}

  We, however, will not able to prove anything without a
  relationship between multiplication and addition. Therefore,
  the next property is definitely necessary.
  \begin{itemize}[label=\textnormal{(\arabic*)}]
    \item[\mylabel{itm:P9}{(P9)}]
    If $a$, $b$ and $c$ are any numbers, then
    \begin{equation*}
      a\cdot(b+c)=a\cdot b+a\cdot c
    \end{equation*}
    By \ref{itm:P8}, it is also true that
    $(b+c)\cdot a=b\cdot a+c\cdot a$
  \end{itemize}
  We will see in the next remark and lemmas that properties
  are not built in a straight line. Rather, it is a result
  of necessities, of fixes and starts that somehow fits
  the pieces of a puzzle perfectly.
  \begin{ab} \label{ab:1}
    When $a-b=b-a$?
  \end{ab}
  \begin{solution}
    \begin{IEEEeqnarray*}{*x+rClCl+x*}
      \text{Add b at both sides,} &
      (a-b)+b & = & (b-a)+b & = &b+(b-a) &~\text{by \ref{itm:P4}} \\
      \text{By \ref{itm:P1},} &
      a+(-b+b) & = & (b+b)+(-a) \\
      \text{By \ref{itm:P3},} &
      a+0 & = & b+b-a \\
      \text{By \ref{itm:P2},} &
      a & = & b+b-a \\
      \text{Add both sides to a,} &
      a+a & = & (b+b-a)+a \\
      \text{By \ref{itm:P1},} &
      a+a & = & b+(b+(-a+a))& =& b+b & \text{by \ref{itm:P2}
      and \ref{itm:P3}}\\
      \text{By \ref{itm:P9},} &
      a\cdot(1+1) & = & b\cdot(1+1)\\
      \text{By \autoref{lemm:2},} &
      a & = & b\\
      &&&&&& \qedhere
    \end{IEEEeqnarray*}
  \end{solution}
  Note that the proof above based on the presumption that
  we know $1+1\neq 0$. How do we prove it?
  \begin{id}
    $a\cdot 0=0$
  \end{id}
  \begin{proof}
    \begin{IEEEeqnarray*}{*x+rCl+x*}
      \text{We have} & a\cdot 0+a\cdot 0 & = &
      a\cdot(0+0) & by \ref{itm:P9} \\
      \text{By \ref{itm:P2},} & & = &
      a\cdot 0\\
      \text{Add $-a\cdot0$,} & a\cdot 0 & = &
      0\\
      &&&& \qedhere
    \end{IEEEeqnarray*}
  \end{proof}
  \begin{id} \label{lemm:5}
    The product of two negative numbers is positive
  \end{id}
  \begin{proof}
    We first prove that $(-a)\cdot b=-(a\cdot b)$,
    \begin{IEEEeqnarray*}{*x+rCl+x*}
      \text{We have by \ref{itm:P9},} & (-a)\cdot b+(a\cdot b)
      & = & (-a+a)\cdot b \\
      & & = & 0 \\
      \text{Adding $-(a\cdot b)$ to both sides,} &
      (-a)\cdot b & = & -(a\cdot b) \\
    \end{IEEEeqnarray*}
    Now, let's prove the main statement.
    \begin{IEEEeqnarray*}{*x+rCl+x*}
      \text{From above,} & (-a)\cdot (-b)+[-(a\cdot b)] & = &
      (-a)\cdot(-b)+[(-a)\cdot b] \\
      & & = & (-a)\cdot(-b+b) \\
      & & = & 0 \\
      \text{Adding $(a\cdot b)$ to both sides,} &
      (-a)\cdot(-b) & = & (a\cdot b)\\
      & & & & \qedhere
    \end{IEEEeqnarray*}
  \end{proof}
  We say that \autoref{lemm:5} is a direct consequence of
  \ref{itm:P1}-\ref{itm:P9}.

  Also, \ref{itm:P9} has important consequences: Justifying
  the algebraic manipulations(e.g, $x^2-3x+2=(x-1)(x-2)$) and
  the way one multiplies arabic numerals,
  \begin{equation*}
    \begin{array}{r}
                              13 \\
    \underline{\mbox{}\times  24} \\
                              52 \\
    \underline{\mbox{}       26\phantom{0}} \\
                              312
    \end{array}
  \end{equation*}

  Denote the set of all positive numbers by $P$.
  \begin{itemize}[label=\textnormal{(\arabic*)}]
    \item[\mylabel{itm:P10}{(P10)}](Trichotomy law)
    For every number $a$, one and only one of the following
    holds:
    \begin{enumerate}[label=(\roman*)]
      \item $a=0$
      \item $a\in P$
      \item $-a\in P$
    \end{enumerate}
    \item[\mylabel{itm:P11}{(P11)}](Closure under addition)
    If $a\in P \land b\in P$ then $a+b\in P$
    \item[\mylabel{itm:P12}{(P12)}](Closure under multiplication)
    If $a\in P \land b\in P$ then $a\cdot b \in P$
  \end{itemize}
  These properties should be complemented by the following
  definitions:
  \begin{equation*}
    \begin{array}{rcl}
      a>b & \text{if} & a-b \in P \\
      a<b & \text{if} & b>a \\
      a\geq b & \text{if} & a=b \text{ or } a>b\\
      a\leq b & \text{if} & a=b \text{ or } a<b
    \end{array}
  \end{equation*}
  The following lemmas are easy to prove\ldots
  \begin{id}
    If $a<b$ then $a+c<b+c$
  \end{id}
  \begin{proof}
    If $a<b$, then $b-a\in P$, which is surely $(b+c)-(a+c)
    \in P$
  \end{proof}
  \begin{id}
    If $a<b \land b<c$ then $a<c$
  \end{id}
  \begin{proof}
    Then $b-a \in P$ and $c-b \in P$. By \ref{itm:P11},
    $(b-a)+(c-b)=c-a\in P$
  \end{proof}
  \begin{id}
    If $a<0 \land b<0$ then $a\cdot b>0$
  \end{id}
  \begin{proof}
    Then $-a>0 \land -b>0$. By \ref{itm:P12}, $(-a)\cdot
    (-b)=a\cdot b>0$, by \autoref{lemm:5}.
  \end{proof}
  \begin{id}
    If $a\neq 0$, then $a^2\neq 0$
  \end{id}
  \begin{proof}
    Because if $a>0 \land b>0$ and $a<0 \land b<0$ then
    $a\cdot b>0$, let $b=a$
  \end{proof}
  This implies that $1>0$ (since $1^2=1$).

  We now prove a basic theorem relating to the absolute value.
  \begin{thm} \label{thm:1}
    $\forall a \land b$,
    \begin{equation*}
      |a+b|\leq|a|+|b|
    \end{equation*}
  \end{thm}
  \begin{proof}
    We apply the straightforward proof. A more elegant proof
    appears in the exercises.
    We will consider 4 cases:
    %\begin{equation*}
      \begin{align*}
        a \geq 0 \qquad \text{and} \qquad b \geq 0 \tag{1}
        \label{t:1}\\
        a \geq 0 \qquad \text{and} \qquad b \leq 0 \tag{2}
        \label{t:2}\\
        a \leq 0 \qquad \text{and} \qquad b \geq 0 \tag{3}
        \label{t:3}\\
        a \leq 0 \qquad \text{and} \qquad b \leq 0 \tag{4}
        \label{t:4}
      \end{align*}
    %\end{equation*}
    For \eqref{t:1}, the statement occurs
    with equality; that is,
    \begin{equation*}
      |a+b|=a+b=|a|+|b|
    \end{equation*}
    For \eqref{t:4}, the same is true by observing,
    \begin{equation*}
      |a+b|=-(a+b)=(-a)+(-b)=|a|+|b|
    \end{equation*}
    For \eqref{t:2}, the job is dumped down to proving
    that $|a+b|\leq a-b$. This divides the case into two
    subcases.
    \par\note{Subcase 1:} $a+b\geq0$\\
    Then note that $b\leq(-b)$, which is true since
    $b\leq0$.
    \par\note{Subcase 2:} $a+b\leq0$\\
    Then we have $(-a)\leq a$, which is true since
    $a\geq0$.
    \par For \eqref{t:3}, the case is proved by interchanging
    the role of $a$ and $b$.
  \end{proof}
  Note from the proof above that equality happens if
  $a$ and $b$ have the same sign, or one of the two is zero.
  \begin{ab}
    It is crucial to understand that \ref{itm:P1}-\ref{itm:P12}
    are not enough to account for \note{all} properties
    of numbers. The deficiency is profound and subtle;
    and,hopefully, will be discovered in the rest of the note.
  \end{ab}
% END OF CHAPTER 1

% CHAPTER 2
  \chapter{Number of various sorts}
  $\mathbb{N}$ is the basic set and has many deficiencies.
  (\ref{itm:P2} and \ref{itm:P3}).
  \par
  Mathematical induction principle is the basic property of
  $\mathbb{N}$; however, even though proof by induction
  is quite straightforward, \note{the method by which
  the formula was discovered remains a mystery}.
  \begin{thm}[Well-ordering principle]
    If $A$ is a nonnull set of natural numbers,
    then $A$ has a least member.
  \end{thm}
  \begin{proof}
    Suppose $A$ has no least member. Let $B$ be the
    collection of $n$ natural numbers $1,\ldots,n$
    that are not \note{all} in $A$.
    Clearly, $1$ is in $B$ (if not, $1$ would be the
    least member in $A$). Moreover, if $1,\ldots,k$
    are not in $A$, surely $k+1$ is not in $A$ either (%
    else, $k+1$ would be the least member in $A$).
    This shows that if $k\in B$, then $k+1 \in B$.
    Hence, $B$ is the set of all natural numbers, and
    $A=\emptyset$.
  \end{proof}
  $\mathbb{N}$ can be defined either by the well-ordering
  principle for by mathematical induction since they are
  equivalent.
  \par
  \note{Principle of complete induction}:

  {\centering
    \begin{varwidth}{\textwidth}
      \begin{enumerate}[label=(\arabic*)]
        \item $1$ is in $A$,
        \item $k+1$ is in $A$ if $1,\ldots,k$ are in $A$,
      \end{enumerate}
    \end{varwidth}
  \par}
  \smallskip
  then $A$ is the set of all natural numbers.
  \\ Complete induction is the consequence of induction.
  \par
  Recursive definition.
  \par
  Deficiencies of $\mathbb{N}$ can be partially remedied
  by $\mathbb{Z}$(\ref{itm:P7} fails.), which is remedied
  by $\mathbb{Q}$, which is smaller than $\mathbb{Z}$.
  \par
  Every natural number $n$ is either odd or even.
  \par
  if $n$ is odd, $n^2$ is odd; if $n$ is even, $n^2$ is
  even. Hence,\\
  if $n^2$ is even, n is even; if $n^2$ is odd, $n$ is odd.

  % Chapter 3: Functions
  \chapter{Functions}
  \note{Domain} of the function $:=$ the set of numbers to
  which the function is defined!
  \begin{IEEEeqnarray}{rCl}
    f(x) &=& x^2 ~ \forall x \\
    g(y) &=& \frac{y^3 + 3y + 5}{y^2 + 1} ~\forall{} y \\
    h(c) &=& \frac{c^3 + 3c + 5}{c^2 - 1} ~\forall{} c\neq\pm1 \\
    r(x) &=& x^2 ,~\{x: -17\leq x \leq \frac{\pi}{3}\} \\
    s(x) &=& \left\{
    \begin{array}{rl}
      0, & x ~\text{irrational} \\
      1, & x ~\text{rational}
    \end{array}
    \right.
  \end{IEEEeqnarray}

  \end{document}
